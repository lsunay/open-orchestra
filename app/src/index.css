@tailwind base;
@tailwind components;
@tailwind utilities;

/**
 * Warm Paper Design System
 * Papery, warm aesthetic - like quality stationery
 * No harsh contrasts, everything warm and considered
 */

@layer base {
  :root {
    color-scheme: dark;

    /* Dark mode: Rich charcoal base */
    --background: 30 5% 10.5%; /* #1b1b1b */
    --foreground: 40 20% 92%; /* warm off-white */

    /* Elevated surfaces */
    --card: 30 5% 12%; /* #1e1e1e */
    --card-foreground: 40 20% 92%;

    --popover: 30 5% 14%;
    --popover-foreground: 40 20% 92%;

    /* Warm tan accent */
    --primary: 35 25% 45%;
    --primary-foreground: 40 20% 95%;

    /* Muted secondary */
    --secondary: 30 5% 15%;
    --secondary-foreground: 40 15% 70%;

    --muted: 30 5% 18%;
    --muted-foreground: 40 10% 55%;

    --accent: 35 8% 18%;
    --accent-foreground: 40 20% 92%;

    --destructive: 0 55% 45%;
    --destructive-foreground: 40 20% 95%;

    /* Subtle borders */
    --border: 30 5% 20%;
    --input: 30 5% 15%;
    --ring: 35 15% 70%;

    /* Status colors - warmer variants */
    --status-ready: 142 50% 40%;
    --status-busy: 38 70% 50%;
    --status-error: 0 55% 50%;
    --status-stopped: 30 5% 35%;
    --status-starting: 200 40% 50%;
  }

  /* Light mode - warm cream */
  .light {
    color-scheme: light;

    --background: 40 30% 97%; /* warm cream */
    --foreground: 30 15% 15%; /* deep brown-charcoal */

    --card: 40 25% 95%; /* soft tan */
    --card-foreground: 30 15% 15%;

    --popover: 40 25% 98%;
    --popover-foreground: 30 15% 15%;

    --primary: 35 30% 35%;
    --primary-foreground: 40 30% 97%;

    --secondary: 35 20% 90%;
    --secondary-foreground: 30 15% 25%;

    --muted: 35 20% 88%;
    --muted-foreground: 30 10% 45%;

    --accent: 35 15% 92%;
    --accent-foreground: 30 15% 15%;

    --destructive: 0 60% 45%;
    --destructive-foreground: 40 30% 97%;

    --border: 35 15% 85%;
    --input: 35 15% 88%;
    --ring: 30 20% 25%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html,
  body,
  #root {
    @apply h-full;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: "Geist Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    font-size: 14px;
    line-height: 1.5;
  }

  /* Warm focus ring */
  :focus-visible {
    @apply outline-none ring-2 ring-ring ring-offset-2 ring-offset-background;
  }

  ::selection {
    @apply bg-primary/20;
  }
}

@layer components {
  /* Top nav tabs */
  .nav-tabs {
    @apply flex items-center gap-1 h-12 px-4 border-b border-border bg-card;
  }

  .nav-tab {
    @apply flex items-center gap-2 px-3 py-1.5 text-sm text-muted-foreground rounded-md;
    @apply hover:text-foreground hover:bg-accent/50 transition-colors;
  }

  .nav-tab.active {
    @apply text-foreground bg-accent;
  }

  .nav-tab-icon {
    @apply text-muted-foreground;
  }

  .nav-tab.active .nav-tab-icon {
    @apply text-foreground;
  }

  .nav-controls {
    @apply flex items-center gap-2;
  }

  .nav-pill {
    @apply flex items-center gap-2 rounded-md bg-background border border-border px-2.5 py-1.5 text-xs text-muted-foreground;
  }

  .nav-input {
    @apply bg-transparent text-sm text-foreground placeholder:text-muted-foreground outline-none;
    min-width: 140px;
  }

  /* Buttons - minimal, dark and white */
  .btn {
    @apply inline-flex items-center justify-center gap-1.5;
    @apply px-4 py-2 text-sm font-medium rounded-md;
    @apply bg-secondary text-secondary-foreground border border-border;
    @apply hover:bg-accent/50 transition-colors;
    @apply disabled:opacity-50 disabled:pointer-events-none;
  }

  .btn-primary {
    @apply bg-foreground text-background border-foreground;
    @apply hover:bg-foreground/90;
  }

  .btn-ghost {
    @apply bg-transparent border-transparent text-muted-foreground;
    @apply hover:text-foreground hover:bg-accent/50;
  }

  .btn-destructive {
    @apply bg-destructive text-destructive-foreground border-destructive;
    @apply hover:bg-destructive/90;
  }

  .btn-sm {
    @apply px-3 py-1.5 text-xs;
  }

  .btn-xs {
    @apply px-2 py-1 text-xs;
  }

  .btn-icon {
    @apply p-2;
  }

  .btn-compact {
    @apply px-2.5 py-1 text-xs;
  }

  /* Input - rounded, subtle */
  .input {
    @apply w-full px-3 py-2 text-sm rounded-md bg-input border border-border;
    @apply placeholder:text-muted-foreground;
    @apply focus:border-ring focus:ring-1 focus:ring-ring;
    @apply transition-colors;
  }

  /* Card */
  .card {
    @apply rounded-lg border border-border bg-card shadow-sm;
  }

  .card-header {
    @apply p-4 border-b border-border;
  }

  .card-content {
    @apply p-4;
  }

  /* Session/Worker list items */
  .session-item {
    @apply flex flex-col gap-1 px-3 py-3 cursor-pointer border-b border-border;
    @apply hover:bg-accent/50 transition-colors;
  }

  .session-item.selected {
    @apply bg-accent;
  }

  .session-item-header {
    @apply flex items-center justify-between gap-2;
  }

  .session-item-title {
    @apply text-sm font-medium text-foreground truncate;
  }

  .session-item-meta {
    @apply flex items-center gap-3 text-xs text-muted-foreground;
  }

  .session-item-actions {
    @apply flex items-center gap-1 opacity-0 transition-opacity;
  }

  .session-item:hover .session-item-actions {
    @apply opacity-100;
  }

  /* Status indicators */
  .status-dot {
    @apply w-2 h-2 rounded-full flex-shrink-0;
  }

  .status-dot.ready {
    @apply bg-status-ready;
  }
  .status-dot.busy {
    @apply bg-status-busy;
  }
  .status-dot.error {
    @apply bg-status-error;
  }
  .status-dot.stopped {
    @apply bg-status-stopped;
  }
  .status-dot.starting {
    @apply bg-status-starting;
  }

  .status-badge {
    @apply inline-flex items-center gap-1.5 px-2 py-0.5 text-xs rounded-full;
  }

  .status-badge.ready {
    @apply bg-status-ready/15 text-status-ready;
  }

  .status-badge.busy {
    @apply bg-status-busy/15 text-status-busy;
  }

  .status-badge.error {
    @apply bg-status-error/15 text-status-error;
  }

  .status-badge.stopped {
    @apply bg-status-stopped/15 text-status-stopped;
  }

  /* Message styling */
  .message {
    @apply px-4 py-4 border-b border-border/50;
  }

  .message-user {
    @apply bg-transparent;
  }

  .message-assistant {
    @apply bg-card/30;
  }

  .message-content {
    @apply text-sm leading-relaxed;
  }

  /* Prose styling for markdown */
  .prose {
    @apply text-foreground;
  }

  .prose p {
    @apply mb-3 last:mb-0;
  }

  .prose h1,
  .prose h2,
  .prose h3,
  .prose h4,
  .prose h5,
  .prose h6 {
    @apply font-semibold text-foreground mt-4 mb-2;
  }

  .prose h1 {
    @apply text-xl;
  }

  .prose h2 {
    @apply text-lg;
  }

  .prose h3 {
    @apply text-base;
  }

  .prose ul,
  .prose ol {
    @apply my-2 pl-5;
  }

  .prose ul {
    @apply list-disc;
  }

  .prose ol {
    @apply list-decimal;
  }

  .prose li {
    @apply mb-1;
  }

  .prose code {
    @apply px-1.5 py-0.5 rounded bg-muted text-sm font-mono;
  }

  .prose pre {
    @apply my-3 p-3 rounded-lg bg-muted overflow-x-auto;
  }

  .prose pre code {
    @apply px-0 py-0 bg-transparent;
  }

  .prose blockquote {
    @apply my-3 pl-4 border-l-2 border-primary/50 text-muted-foreground italic;
  }

  .prose a {
    @apply text-primary underline underline-offset-2 hover:text-primary/80;
  }

  .prose strong {
    @apply font-semibold text-foreground;
  }

  .prose em {
    @apply italic;
  }

  .prose hr {
    @apply my-4 border-border;
  }

  .prose table {
    @apply w-full my-3 text-sm;
  }

  .prose th,
  .prose td {
    @apply border border-border px-3 py-1.5;
  }

  .prose th {
    @apply bg-muted font-medium text-left;
  }

  /* Composer */
  .composer {
    @apply flex items-end gap-3 bg-card border border-border rounded-lg p-3;
    @apply shadow-sm;
  }

  .composer-textarea {
    @apply flex-1 bg-transparent text-sm text-foreground resize-none outline-none;
    @apply placeholder:text-muted-foreground;
    min-height: 40px;
    max-height: 200px;
  }

  .composer-actions {
    @apply flex items-center gap-1;
  }

  /* Badge */
  .badge {
    @apply inline-flex items-center px-2 py-0.5 text-xs rounded-md;
    @apply bg-muted text-muted-foreground;
  }

  .badge-outline {
    @apply border border-border bg-transparent;
  }

  /* Mono text for technical content */
  .mono {
    font-family: "Geist Mono", "SF Mono", "Fira Code", ui-monospace, monospace;
  }

  /* Port/technical info badge */
  .tech-badge {
    @apply inline-flex items-center gap-1 px-2 py-0.5 text-xs rounded;
    @apply bg-muted/50 text-muted-foreground font-mono;
  }

  /* Duration display */
  .duration {
    @apply text-xs text-muted-foreground tabular-nums;
  }

  /* Empty state */
  .empty-state {
    @apply flex flex-col items-center justify-center h-full text-center p-8;
  }

  .empty-state-icon {
    @apply w-12 h-12 text-muted-foreground/30 mb-4;
  }

  .empty-state-title {
    @apply text-lg font-medium text-foreground mb-1;
  }

  .empty-state-description {
    @apply text-sm text-muted-foreground mb-4;
  }

  /* Agents / Skills workspace */
  .agents-shell {
    @apply flex-1 flex h-full overflow-hidden;
    background:
      radial-gradient(1200px 500px at 15% -10%, rgba(214, 170, 96, 0.12), transparent 55%),
      radial-gradient(900px 600px at 85% -20%, rgba(90, 150, 130, 0.12), transparent 60%), hsl(var(--background));
  }

  .skills-sidebar {
    @apply w-80 border-r border-border/60 bg-card/70 backdrop-blur-xl;
  }

  .skills-sidebar-inner {
    @apply flex flex-col h-full;
  }

  .skills-header {
    @apply px-5 pt-5 pb-4 border-b border-border/60 flex items-start justify-between gap-4;
  }

  .skills-eyebrow {
    @apply text-[10px] uppercase tracking-[0.2em] text-muted-foreground/70;
  }

  .skills-title {
    @apply text-lg font-semibold text-foreground;
  }

  .skills-count {
    @apply text-[11px] px-2 py-0.5 rounded-full bg-secondary text-secondary-foreground;
  }

  .skills-subtitle {
    @apply text-xs text-muted-foreground/80 mt-1;
  }

  .skills-new-btn {
    @apply h-8 px-3 rounded-full;
  }

  .skills-search {
    @apply px-4 py-3 border-b border-border/60;
  }

  .skills-search input {
    @apply bg-background/60 border-border/70 rounded-full pl-4;
  }

  .skills-list {
    @apply flex-1;
  }

  .skills-list-inner {
    @apply p-4 space-y-3;
  }

  .skills-muted {
    @apply text-xs text-muted-foreground/70 px-1;
  }

  .skill-item {
    @apply w-full text-left rounded-xl border border-border/70 px-4 py-3 bg-background/50;
    @apply transition-all duration-200 hover:border-primary/40 hover:bg-background/80;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
  }

  .skill-item.selected {
    @apply border-primary/60 bg-background;
    box-shadow:
      0 10px 28px rgba(0, 0, 0, 0.18),
      0 0 0 1px rgba(214, 170, 96, 0.2);
  }

  .skill-item-header {
    @apply flex items-center justify-between gap-3;
  }

  .skill-item-title {
    @apply text-sm font-semibold text-foreground;
  }

  .skill-item-badge {
    @apply text-[10px] uppercase tracking-[0.15em] bg-secondary/70 text-secondary-foreground;
  }

  .skill-item-desc {
    @apply mt-2 text-xs text-muted-foreground/80 truncate-2;
  }

  .skill-item-meta {
    @apply mt-3 flex items-center gap-2 text-[10px] text-muted-foreground/70;
  }

  .skill-item-model {
    @apply font-mono;
  }

  .skill-item-dot {
    @apply h-1 w-1 rounded-full bg-muted-foreground/50;
  }

  .skill-item-hint {
    @apply uppercase tracking-[0.2em];
  }

  .skills-workspace {
    @apply flex-1 overflow-hidden;
  }

  .skills-empty {
    @apply h-full w-full flex items-center justify-center p-8;
  }

  .skills-empty-card {
    @apply max-w-md w-full rounded-2xl border border-border/60 bg-card/60 px-6 py-8 flex items-center gap-4;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.25);
  }

  .skills-empty-icon {
    @apply h-10 w-10 rounded-full bg-primary/20 text-primary flex items-center justify-center text-lg;
  }

  .skills-empty-title {
    @apply text-base font-semibold text-foreground;
  }

  .skills-empty-subtitle {
    @apply text-sm text-muted-foreground/80 mt-1;
  }

  .skills-editor {
    @apply flex flex-col h-full;
  }

  .skills-editor-header {
    @apply flex items-start justify-between gap-4 px-6 py-5 border-b border-border/60 bg-card/60 backdrop-blur;
  }

  .skills-editor-eyebrow {
    @apply text-[10px] uppercase tracking-[0.2em] text-muted-foreground/70;
  }

  .skills-editor-title {
    @apply text-xl font-semibold text-foreground;
  }

  .skills-editor-subtitle {
    @apply text-xs text-muted-foreground/80 mt-1;
  }

  .skills-editor-actions {
    @apply flex items-center gap-2;
  }

  .skills-editor-tabs {
    @apply flex items-center gap-2 px-6 py-2 border-b border-border/60 text-xs bg-card/40;
  }

  .skills-editor-tab {
    @apply px-3 py-1.5 rounded-full text-muted-foreground/80 transition-colors;
    @apply hover:text-foreground hover:bg-accent/50;
  }

  .skills-editor-tab.active {
    @apply text-foreground bg-accent;
  }

  .skills-editor-body {
    @apply flex-1 overflow-auto p-6;
  }
}

@layer utilities {
  /* Custom scrollbar */
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--border)) transparent;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background: hsl(var(--border));
    border-radius: 9999px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--muted-foreground));
  }

  /* Text utilities */
  .text-mono {
    font-family: "Geist Mono", "SF Mono", ui-monospace, monospace;
  }

  /* Truncate with ellipsis */
  .truncate-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

/* Animations */
@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slide-up {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pulse-soft {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.6;
  }
}

.animate-fade-in {
  animation: fade-in 0.2s ease-out;
}

.animate-slide-up {
  animation: slide-up 0.3s ease-out;
}

.animate-pulse-soft {
  animation: pulse-soft 2s ease-in-out infinite;
}
